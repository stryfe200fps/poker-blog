import{d as p,j as S,p as I,l as j,o as a,c as B,w as C,e as s,f,a as n,t as g,g as h,v as E,W as M,F as w,h as x,b as N}from"./app.7f39c4b9.js";import{_ as V}from"./FrontLayout.4711af98.js";import{R as T}from"./ReportList.58582838.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";import"./moment.6f3312fc.js";/* empty css                                                             */import{u as O}from"./event.bde20635.js";import{u as P}from"./tournament.aea21949.js";import"./default-avatar.e96f2939.js";/* empty css                                                                   */const z={key:0},U={key:0},W={key:1,class:"block-content"},$={class:"title-section"},q={class:"title-section hide-underline"},A={key:0,style:{display:"flex","justify-content":"space-between","align-items":"center"}},G={class:"text-capitalize"},H={key:0},J=["value","checked"],K={class:"single-post-box"},Q={__name:"Index",props:{slug:{type:String},page:{type:String}},setup(L){const d=L,t=O(),b=P(),o=p([]),r=p(null),u=p([]),_=p(1),v=p(1),y=S(()=>{var i,e;return Object.values((e=(i=o==null?void 0:o.value)==null?void 0:i.available_days)!=null?e:{})}),R=()=>{let{available_days:i}=t.eventData.data,e=Object.values(i);return console.log(e),e[e.length-1]};async function D(){if(_.value>=v.value)return;_.value++,await t.getLiveReport(_.value,d.slug,r.value);const i=t.liveReportList.data.map(e=>e.level).toString();for(const e of u.value)if(e.level===i){const m=t.liveReportList.data.findIndex(c=>c.level===e.level),l=e.collection.concat(t.liveReportList.data[m].collection);e.collection=l;return}v.value=t.liveReportList.meta.last_page}I(async()=>{await t.getEventData(d.slug),await b.getList(),await t.getLiveReport(1,d.slug,R()),u.value=t.liveReportList.data,v.value=t.liveReportList.meta.last_page,r.value=R()});const k=async()=>{_.value=1,v.value=1,await t.getLiveReport(1,d.slug,r.value),u.value=t.liveReportList.data,v.value=t.liveReportList.meta.last_page};return j(()=>t.eventData.data,function(){o.value=t.eventData.data}),(i,e)=>(a(),B(V,{title:"Event"},{default:C(()=>{var m;return[o.value?(a(),s("div",z,[u.value?(a(),s("div",U)):f("",!0),(a(),s("div",W,[n("div",$,[n("h1",null,[n("span",null,g(o.value.tournament),1)])]),n("div",q,[o.value?(a(),s("div",A,[n("h1",null,[n("span",G,g(o.value.title),1)]),((m=h(y))==null?void 0:m.length)>1?(a(),s("p",H,[E(n("select",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),onChange:k},[(a(!0),s(w,null,x(h(y),(l,c)=>(a(),s("option",{class:"text-center",key:c,value:c,checked:l==r.value}," Day "+g(l),9,J))),128))],544),[[M,r.value]])])):(a(!0),s(w,{key:1},x(h(y),(l,c)=>(a(),s("p",{key:c}," Day: "+g(l),1))),128))])):f("",!0)]),n("div",K,[N(T,{event:o.value,reports:u.value,onLoadMore:D,onShowNewReport:k,currentTab:L.page},null,8,["event","reports","currentTab"])])]))])):f("",!0)]}),_:1}))}},ie=F(Q,[["__scopeId","data-v-03403cce"]]);export{ie as default};
