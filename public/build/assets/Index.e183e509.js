import{d as p,j as S,p as I,l as j,o as a,c as B,w as C,e as l,f,a as n,t as g,g as h,v as E,W as M,F as w,h as x,b as N}from"./app.7bb3fc94.js";import{_ as V}from"./FrontLayout.4ca508b4.js";import{R as T}from"./ReportList.7fdb3b5b.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";import"./moment.61e475d7.js";/* empty css                                                             */import{u as O}from"./event.8bd7a62d.js";import{u as P}from"./tournament.7c4ee9f0.js";import"./default-avatar.a301eb7a.js";/* empty css                                                                   */const z={key:0},U={key:0},W={key:1,class:"block-content"},$={class:"title-section"},q={class:"title-section hide-underline"},A={key:0,style:{display:"flex","justify-content":"space-between","align-items":"center"}},G={class:"text-capitalize"},H={key:0},J=["value","checked"],K={class:"single-post-box"},Q={__name:"Index",props:{slug:{type:String},page:{type:String}},setup(L){const d=L,e=O(),b=P(),o=p([]),r=p(null),c=p([]),_=p(1),u=p(1),y=S(()=>{var i,t;return Object.values((t=(i=o==null?void 0:o.value)==null?void 0:i.available_days)!=null?t:{})}),R=()=>{let{available_days:i}=e.eventData.data,t=Object.values(i);return t[t.length-1]};async function D(){if(_.value>=u.value)return;_.value++,await e.getLiveReport(_.value,d.slug,r.value);const i=e.liveReportList.data.map(t=>t.level).toString();for(const t of c.value)if(t.level===i){const m=e.liveReportList.data.findIndex(v=>v.level===t.level),s=t.collection.concat(e.liveReportList.data[m].collection);t.collection=s;return}u.value=e.liveReportList.meta.last_page}I(async()=>{await e.getEventData(d.slug),await b.getList(),await e.getLiveReport(1,d.slug,R()),c.value=e.liveReportList.data,u.value=e.liveReportList.meta.last_page,r.value=R()});const k=async()=>{_.value=1,u.value=1,await e.getLiveReport(1,d.slug,r.value),c.value=e.liveReportList.data,u.value=e.liveReportList.meta.last_page};return j(()=>e.eventData.data,function(){o.value=e.eventData.data}),(i,t)=>(a(),B(V,{title:"Event"},{default:C(()=>{var m;return[o.value?(a(),l("div",z,[c.value?(a(),l("div",U)):f("",!0),(a(),l("div",W,[n("div",$,[n("h1",null,[n("span",null,g(o.value.tournament),1)])]),n("div",q,[o.value?(a(),l("div",A,[n("h1",null,[n("span",G,g(o.value.title),1)]),((m=h(y))==null?void 0:m.length)>1?(a(),l("p",H,[E(n("select",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),onChange:k},[(a(!0),l(w,null,x(h(y),(s,v)=>(a(),l("option",{class:"text-center",key:v,value:s,checked:s==r.value}," Day "+g(s),9,J))),128))],544),[[M,r.value]])])):(a(!0),l(w,{key:1},x(h(y),(s,v)=>(a(),l("p",{key:v}," Day: "+g(s),1))),128))])):f("",!0)]),n("div",K,[N(T,{event:o.value,reports:c.value,onLoadMore:D,onShowNewReport:k,currentTab:L.page},null,8,["event","reports","currentTab"])])]))])):f("",!0)]}),_:1}))}},ie=F(Q,[["__scopeId","data-v-87ac058e"]]);export{ie as default};
